{% load humanize %}
{% load safe_divide %}


<div class="flex flex-col">
    <div class="overflow-x-auto sm:-mx-6 lg:-mx-8">
      <div class="inline-block min-w-full py-2 sm:px-6 lg:px-8">
        <div class="overflow-hidden">
          <table
            class="min-w-full text-center text-sm font-light text-surface dark:text-white">
            <thead class="border-b border-neutral-200 font-medium dark:border-white/10">

                <tr class="bg-white-200" style="height:20px;margin-bottom: 50px;">
                  <th scope="col" class="">
    
                  </th>
                  <th scope="col" class=""></th>
                  <th scope="col" class=""></th>
                  <th scope="col" class=""></th>
                  <th scope="col" class=""></th>
                </tr>
    
             
                <tr class="bg-gray-200">
    
                  <th scope="col" class="flex w-auto">
                    W2 Branch Yearly Gross Income
                  </th>
                  <th scope="col" class="font-bold">
                    ${{ahf_annual_cap_data.branch_gross_income|intcomma}}
                  </th>

                <th scope="col" class="font-bold">
                
                </th>

                <th scope="col" class="font-bold">
                
                </th>

                <th scope="col" class="font-bold">
                
                </th>

                <th scope="col" class="">
                    Number of Loans
                  </th>
                  <th scope="col" class="">
                    {{loan_per_year}}
                  </th>
    
                  <!-- R column -->
                  <th scope="col" class="">
                    {{loan_per_year}}
                  </th>
                </tr>
    
              </thead>
    
            <tbody>

            {% for category in categories %}
              <tr class="flex  dark:border-white/10">

                <td class="whitespace-nowrap px-6 font-medium">
                  {{category}}
                </td>
                <td class="whitespace-nowrap">
                </td>
                <td class="whitespace-nowrap">
                </td>
              </tr>

            {% for expense in category.expense.all %}
                <tr class="flex space-between min-w-full text-center text-sm font-light text-surface dark:text-white"
                style="flex-direction: row;justify-content:space-around;">
                
                <td class="whitespace-nowrap justify-end">
                    {{expense|intcomma}}
                </td>
                <td class="flex flex-start">


                <form action="{% url 'W2branchYearlyGross:control_expense' %}" method="post" class="flex flex-col">
                  {% csrf_token %}
                  <div class="relative mb-3" data-twe-input-wrapper-init>
                    <input 
                      type="text"
                      class="peer block min-h-[auto] rounded border-0 bg-transparent leading-[1.6] outline-none transition-all duration-200 ease-linear focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 data-[twe-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none dark:text-white dark:placeholder:text-neutral-300 dark:autofill:shadow-autofill dark:peer-focus:text-primary [&:not([data-twe-input-placeholder-active])]:placeholder:opacity-0"
                      value="{{expense.expense}}"
                      id="category_expense"
                      name="category_expense"
                  />

                  <input 
                  type="hidden"
                  name="category"
                  value="{{category}}"
                                
                  />

                  <input 
                  type="hidden"
                  name="expense"
                  value="{{expense}}"
              
                  />
                 
                  </div>
                </form>
                </td>
                </tr>
            {% endfor %}
            {% endfor %}
             

         

            <tr class="flex space-around bg-gray-200">
    
              <td scope="px-4">
                Total Expense
              </td>
              <td class="px-4">
              
               
              </td>

            <td class="px-4 class="font-bold">
            
            </td>

         <td>
          {{total_expense|intcomma}}
         </td>
              
          
              
  
          
          
            <td scope="col" class="font-bold">
            
            </td>

            <td scope="col" class="">
             
              </td>
              <td scope="col" class="">
              
              </td>

              <!-- R column -->
              <td scope="col" class="">
             
              </td>
            </tr>

            
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>